사람들은 글보다는 그림을 더 직관적으로 받아들인다. 잘 작성한 대시보드 차트 하나는 여러 장의 보고서를 대체할 수 있다. 필자도 항상 고민하는 것이 어떤 정보를 전달해야 하는지를 늘 고민한다.

대시보드 생성하기
본격적으로 대시보드를 생성해보자. Splunk의 대시보드는 차트의 결합이라고 할 수 있다. 제작하는 순서는 대시보드 페이지 생성->차트 패널 생성-> 배치 과정을 거친다. 
우선 결과 데이터를 추출하는 검색어를 작성해야 한다.
이후 각 시각화 화면이 요구하는 올바른 형식의 검색 결과가 반환되는지 확인해야 한다. 대시보드에서 많이 사용하는 시각화 기법을 알아보자. 

차트 시각화
차트 시각화는 Splunk 시각화 기법에서 가장 많이 사용되는 양식이다. 지원하는 유형은 원형 차트, 세로 막대형, 가로 막대형 그리고 꺽은선형, 영역형 등이 있다. 
산포도 및 버블차트도 생성할 수 있다. 이렇듯 다양한 종류를 지원하기 때문에 추출하는 데이터 특성에 맞는 시각화 기법을 사용할 수 있다. 

세로막대형, 가로막대형 차트
X축과 Y축에 개별 값을 표시할 수 있어 하나 이상의 필드값을 표현할 수 있다. 여러 필드의 값을 비교할 수 있다.

원형
하나의 필드를 사용하여 값을 표현할 수 있다. 해당 필드의 전체 값은 원의 면적과 일치한다. 개별 필드의 값을 면적으로 표시한다.  
개별 값이 전체에서 차지하는 비율을 쉽게 판단할 수 있는 장점이 있다. 단, 너무 많은 갯수는 차이를 구분하기 힘들게 한다.

꺾은선, 영역형
꺽은선형 차트는 X축에 시간 정보를 위치시키고 Y축에는 값을 표시한다. 이렇게 함으로써 시간별 증감을 확인하는데 가장 적합하다. 

자 이제 대시보드를 만들어보자. 

대시보드를 생성하는 방법은 보고서와 매우 유사하다. 가장 손쉬운 방법은 검색결과를 대시보드 패널로 저장하는 것이다. 다음 검색어를 실행시키고 결과를 얻었다면 실행 버튼위의 “다른이름으로 저장”을 선택하여 “대시보드 패널”로 저장한다. 
index=book sourcetype="access_combined_wcookie" 
| top showperc=f clientip

대시보드 제목: 한글과 영어 모두 사용할 수 있다.
대시보드 제목: 한글로 입력해서 가독성을 높일 수 있다. 대시보드를 생성한 이후에도 언제든지 제목은 수정할 수 있다. 
대시보드 ID: 한글 이름을 부여할 수 없기 때문에 영어로 작성해야 한다. 대시보드 ID는 Splunk에서 대시보드를 구별할 때 사용하는 이름이므로 반드시 유일해야 한다. 또한 ID는 한 번 부여하면 변경할 수 없다. 
대시보드 권한: 생성한 사용자만 사용하려면 비공개로 설정하고 다른 사용자와 공유하려면 “앱에서 공유됨”을 선택한다. 

대시보드에서 시각화 종류는 패널 콘텐츠에서 선택할 수 있다. 대시보드로 저장하기 이전에 사용했던 시각화가 기본으로 설정된다. 시각화 종류는 대시보드 생성 이후에도 손쉽게 변경할 수 있다. 저장을 선택하면 앱의 대시보드 메뉴에서 추가된 대시보드를 확인할 수 있다. 

대시보드를 생성하는 또 다른 방법은 대시보드 메뉴에서 직접 만드는 방식이다. 
앱 메뉴에서 대시보드를 선택하면 대시보드 목록 페이지를 볼 수 있다. 오른쪽 상단에 위치한 “새 대시보드 만들기”를 선택한다. 

저장하기로 대시보드를 생성했을 때와는 적은 정보로 생성한다. 검색결과가 없으므로 시각화 종류도 없다. 제목과 ID를 입력하고 대시보드를 만들면 아무것도 없는 빈화면이 나타난다. 


이제 이 화면에 원하는 패널을 추가할 수 있다. 검색결과 저장하기로 만든 대시보드도 편집 버튼을 선택하면 이것과 동일한 화면을 볼 수 있다. UI는 편집기를 사용하는 것과 비슷하게 대시보드를 꾸밀 수 있다. Source를 선택하면 대시보드의 XML 소스를 직접 수정할 수 있다. 
패널 추가에서 검색어와 시각화를 결합한 대시보드 패널을 만들 수 있다. 
하나의 대시보드에는 여러 개의 패널을 추가할 수 있다. 정보를 통합해서 보여줄 화면을 대시보드로 설정하고 개별 정보는 대시보드 패널로 추가하면 대시보드의 한 화면에서 여러 정보를 볼 수 있는 장점이 있다. 

대시보드 패널 추가하기

패널을 추가하려면 먼저 대시보드 편집 모드로 들어가야 한다. 대시 보드의 우측 상단에서 편집 버튼을 클릭한다. 편집 모드에서 “패널 추가”버튼을 클릭하면 브라우저 우측 화면에 추가할 수 있는 창이 나타난다. 새로 만들기, 보고서에서 새로 만들기, 대시보드에서 복제, 미리 작성된 패널 추가를 이용해서 패널을 추가할 수 있다. 

여기에서는 새로 만들기를 선택하고 Statistics Table을 선택한다.
통계 테이블은 가장 기본적인 시각화 형식으로 table, top, stats, chart 명령어와 같이 주요 필드를 추출해서 정보를 테이블 형식으로 보여준다. 

통계 테이블은 시각화라기 보다는 데이터 요약에 가깝다. 이해를 쉽게 하기 위해 우선 테이블로 생성하고 이후에 시각화로 변경한다. 이번에는 다음의 검색어를 사용하자. 
index=book sourcetype="access_combined_wcookie" 
| top showperc=f status
검색 실행: 해당 검색어가 올바른 데이터를 반환하는지 검사할 수 있다.클릭하는 경우 새로운 탭이 열리며 입력한 검색어가 실행된다. 사용자는 작성한 검색어의 검색결과를 확인하고 검색어를 수정할 수 있다. 
시간 범위: 검색이 포함할 시간 범위를 지정한다. 만일 검색 시간을 earliest, latest와 같은 토큰 형태로 검색 문자열에 포함시켰으면 시간 범위는 동작하지 않는다. 검색어에 시간 관련 토큰을 넣은 경우 외부의 시간 범위 설정보다 우선순위가 높기 때문이다.저장을 하고 대시보드를 확인하자.

위의 패널은 테이블 형식으로 데이터를 요약해서 보여준다.  이제 시각화를 적용해보자. 편집으로 눌러서 편집모드로 들어간다. 
시각화 버튼을 선택하면 데이터로 만들 수 있는 시각화 형식들을 보여준다. 권장됨은 현재 검색결과가 반환하는 데이터로 표현이 가능한 시각화 형식을 보여준다.

권장됨에서 시각화를 선택하는 것이 바람직하다. 파이차트를 선택해서 시각화를 변경해보자. 
파이차트는 상태코드별 수량에 맞춰서 원에서 면적으로 보여준다. 이로써 전체 규모에서 필드가 차지하는 규모를 직관적으로 활용하는데 용이하다. 변경을 했으면 저장을 눌러서 반영한다. 이제 패널은 테이블이 아니라 파이차트 형식을 보여준다. 차트 위에 마우스를 가져가면 상세 데이터를 보여준다. 

지금까지 대시보드를 만들고 하나의 패널을 추가하는 법을 살펴보았다. 하지만 실제로 운영할때는 여러개의 패널을 사용해서 많은 정보를 동시에 제공한다. 모니터 화면에 맞게 최대한 정확하고 직관적인 정보를 제공하는 대시보드를 작성해야 한다. 다음 시간에는 이런 패널을 여러개 넣은 대시보드를 만들어본다. 
아래 화면이 다음 시간에 만들 대시보드이다. 여러분들도 연습삼아서 만들어 보기바란다. 
